<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Actvity | AILab</title>  
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(180deg, #DFF0F9 25%, #E5F4FF 75%);
      overflow-x: hidden;
    }

    /*Fade Up*/
    .fade-up {
      opacity: 0;
      transform: translateY(40px);
      transition: all .8s ease;
    }
    .fade-up.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* Sticky Navbar Effect */
    .navbar {
      transition: 0.4s ease;
    }
    .navbar.scrolled {
      background: rgba(255, 255, 255, 0.92);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 12px rgba(0,0,0,0.1);
    }
    .disabled {
  opacity: 0.4;
  pointer-events: none;
}
  </style>
</head>

<body>

<!-- NAVBAR SAME -->
<nav class="navbar fixed top-0 w-full z-50 bg-transparent">
  <div class="max-w-7xl mx-auto flex justify-between items-center py-4 px-10">
    <img src="img/logorm.png" class="w-40" alt="logo">

    <ul class="hidden md:flex space-x-8 text-lg font-medium">
      <li><a href="index.html" class="nav-link">Home</a></li>
      <li><a href="about.html" class="nav-link">About</a></li>
      <li><a href="research.html" class="nav-link">Research</a></li>
      <li><a href="activity.html" class="nav-link bg-orange-500 text-white px-4 py-1 rounded-full shadow">Activity</a></li>
      <li><a href="members.html" class="nav-link">Members</a></li>
      <li><a href="facility.html" class="nav-link">Facility</a></li>
      <li><a href="contact.html" class="nav-link">Contact</a></li>
    </ul>
  </div>
</nav>

<!-- BG -->
<div class="absolute w-[700px] h-[700px] bg-cyan-500/20 rounded-full blur-[120px] top-[200px] left-[900px]"></div>

<!-- TITLE -->
<section class="pt-40 text-center fade-up">
  <h1 class="text-5xl font-bold text-sky-700 font-['Inter']">Lab Activity</h1>
</section>

<!-- ACTIVITY GRID -->
<section class="max-w-7xl mx-auto mt-14 px-10 fade-up">

  <div id="activityList" class="grid md:grid-cols-3 gap-8 pt-20"></div>

</section>

<!-- PAGINATION DINAMIS -->
<div id="pagination" class="flex justify-center mt-16 fade-up"></div>

<!-- FOOTER SAME -->
<footer class="mt-32 bg-cyan-900 text-white py-8">
  <div class="max-w-6xl mx-auto grid md:grid-cols-3 gap-8 px-6 text-center md:text-left">

    <div>
      <img src="img/logowhite.png" class="w-40 mx-auto md:mx-0 mb-4">
      <p class="text-sm text-blue-100">
        AI Lab Polinema — a collaborative innovation hub advancing applied informatics.
      </p>
    </div>

    <div>
      <h3 class="text-lg font-semibold mb-3">Quick Links</h3>
      <ul class="space-y-2 text-blue-100">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="research.html">Research</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div>

    <div>
      <h3 class="text-lg font-semibold mb-3">Contact Us</h3>
      <p class="text-blue-100 text-sm">
        Gedung Pascasarjana Lt. 2, Politeknik Negeri Malang <br>
        Email: <a class="email-link underline text-white">ailab@polinema.ac.id</a>
      </p>
    </div>

  </div>
  <div class="text-center text-blue-100 text-sm border-t border-blue-200 mt-6 pt-4">
    © 2025 AI Lab Polinema. All rights reserved.
  </div>
</footer>

<script>
async function loadActivities() {
  const container = document.getElementById("activityList");
  container.innerHTML = "Loading...";

  try {
    const res = await fetch("http://127.0.0.1:8000/api/activities", {
      method: "GET",
      headers: { "Accept": "application/json" }
    });

    const items = await res.json();
    container.innerHTML = "";

    if (!items.length) {
      container.innerHTML = "<p>No published activities.</p>";
      return;
    }

    items.forEach(item => {
      const thumb = item.thumbnail_image ?? "img/default.jpg";

      container.innerHTML += `
        <a href="activity-detail.html?id=${item.id}"
           class="block bg-white rounded-xl shadow p-4 hover:-translate-y-1 transition-all">
           
            <img src="${thumb}" class="w-full h-48 object-cover rounded-lg">
            <h3 class="text-xl font-semibold mt-4">${item.title}</h3>
            <p class="text-gray-700 mt-2">${item.short_description ?? ""}</p>
        </a>
      `;
    });

  } catch (err) {
    console.error(err);
    container.innerHTML = "Failed to load activities.";
  }
}

document.addEventListener("DOMContentLoaded", loadActivities);
</script>

</body>
</html>
